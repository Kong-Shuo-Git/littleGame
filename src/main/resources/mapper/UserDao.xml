<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.game.dao.UserDao">
    <!-- 根据用户名查询用户 -->
    <select id="findByUsername" resultType="org.example.game.pojo.User">
        SELECT user_id as userId, username, password, nickname, create_time as createTime, last_login_time as lastLoginTime 
        FROM user 
        WHERE username = #{username}
    </select>
    <!-- 根据用户ID查询用户 -->
    <select id="findById" resultType="org.example.game.pojo.User">
        SELECT user_id as userId, username, password, nickname, create_time as createTime, last_login_time as lastLoginTime 
        FROM user 
        WHERE user_id = #{userId}
    </select>
    <!-- 插入用户 -->
    <insert id="insert" parameterType="org.example.game.pojo.User" useGeneratedKeys="true" keyProperty="userId">
        INSERT INTO user (username, password, nickname, create_time, last_login_time) 
        VALUES (#{username}, #{password}, #{nickname}, #{createTime}, #{lastLoginTime})
    </insert>
    <!-- 更新用户信息 -->
    <update id="update" parameterType="org.example.game.pojo.User">
        UPDATE user 
        SET username = #{username}, 
            password = #{password}, 
            nickname = #{nickname}, 
            create_time = #{createTime}, 
            last_login_time = #{lastLoginTime} 
        WHERE user_id = #{userId}
    </update>
</mapper>